<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
<ModulePrefs title="State Example" height="120">
  <Require feature="wave" /> 
</ModulePrefs>
<Content type="html">
<![CDATA[ 
<div id="content_div" class="dayfindr_month" style="height: 50px;"></div>

    <link rel="stylesheet" href="" type="text/css" charset="utf-8"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
    <script src="http://github.com/janl/mustache.js/raw/0b2dcc5531cf8fe9d247f1533348cd62d44d7f9e/mustache.js"></script>
    <script src="http://github.com/bjnortier/dayfindr_wave/raw/introduce_moustache/dayfindr_wave.js"></script>
    <script type="text/javascript">

    var div = document.getElementById('content_div');

    function buttonClicked() {
      var value = parseInt(wave.getState().get('count', '0'));
      wave.getState().submitDelta({'count': value + 1});
    }

    function stateUpdated() {

       var template1 = createMonthTemplate(2010, 2);
       var view = viewFromState([[2010, 2],[2010,3]], wave);
       var html1 = Mustache.to_html(template1, view);
       div.innerHTML = html1;

    }
 
    function init() {
      if (wave && wave.isInWaveContainer()) {
        wave.setStateCallback(stateUpdated);
      }
    }
    gadgets.util.registerOnLoadHandler(init);

 
    </script>
 
  ]]> 
  </Content>
</Module>
<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
<ModulePrefs title="State Example" height="800" scrolling="true">
  <Require feature="wave" /> 
  <Require feature="dynamic-height" />
</ModulePrefs>
<Content type="html">
<![CDATA[ 

	 <style  TYPE="text/css">
	 </style>

	 <div id="content_div">Bar</div>

	 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
	 <script src="http://github.com/janl/mustache.js/raw/0b2dcc5531cf8fe9d247f1533348cd62d44d7f9e/mustache.js"></script>
	 <script src="http://github.com/bjnortier/dayfindr_wave/raw/introduce_moustache/dayfindr_wave.js"></script>
	 <script type="text/javascript">

	 function stateUpdated() {

           document.getElementById('content_div').innerHtml = '10';
           var template1 = createMonthTemplate(2010, 2);
	   var template2 = createMonthTemplate(2010, 3);
           var view = viewFromState([[2010, 2],[2010,3]], 'bjnortier@gmail.com', wave);
	   var html1 = Mustache.to_html(template1, view);
	   var html2 = Mustache.to_html(template2, view);
	   /*console.log(html1);
	   console.log(html2);
           document.getElementById('content_div').innerHtml = '<div>X</div><div>Y</div>';

	   gadgets.window.adjustHeight();*/
	   $('#content_div').html = '<div>XXX</div>';
	 }
 
	 function init() {
	   if (wave && wave.isInWaveContainer()) {
	     wave.setStateCallback(stateUpdated);
	   }
	 }
	 gadgets.util.registerOnLoadHandler(init);

	 </script>
	 
	  ]]> 

  </Content>
</Module>
